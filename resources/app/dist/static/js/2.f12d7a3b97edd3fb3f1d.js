webpackJsonp([2],{"/wKt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("RfHK"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"par-state main-padding"},[a("div",{staticClass:"state-one"},[a("div",{staticClass:"state-top"},[a("line-chart",{attrs:{dataArray:t.coChartDate,xField:"time",yField:"value",xName:"小时",yName:"ppm"}})],1),t._v(" "),a("div",{staticClass:"state-bottom"},[a("ring-chart",{attrs:{title:"当前浓度",value:t.coAverage,valueFormatter:"{value} ppm",maxValue:t.coAverageMaxValue}})],1)]),t._v(" "),a("div",{staticClass:"state-tor"},[a("div",{staticClass:"state-top"},[a("floor-stater",{attrs:{floorData:t.floorList,stateData:t.stateData},on:{onLastFloor:t.nextFloor,onNextFloor:t.nextFloor}})],1),t._v(" "),a("div",{staticClass:"state-bottom"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"设备编号",prop:"device_id",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{label:"浓度/ppm",prop:"device_co",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{label:"温度/℃",prop:"device_temp",align:"center",width:""}})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.userTableQuery.page,"page-size":t.tablePageSize,"page-count":t.tablePageTotal,layout:"prev, pager, next, slot, jumper"},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.userTableQuery,"page",e)}}},[a("span",{staticClass:"el-pagination__total page-count-padding"},[t._v("共"+t._s(t.tablePageTotal)+"页")])])],1)],1)],1)])])},staticRenderFns:[]};var i=function(t){a("QPy3")},s=a("Z0/y")(r.a,o,!1,i,"data-v-3e3d5f62",null);e.default=s.exports},"2UA2":function(t,e,a){"use strict";var r=a("IcnI"),o={name:"ring-chart",props:{title:String|Number,value:String|Number,valueFormatter:String|Function,maxValue:Number|Number},data:function(){return{ringCharts:null,chartTrue:!1,chartOption:{grid:{z:1,show:!1,left:"-30%",right:"4%",bottom:"3%",containLabel:!0,splitLine:{show:!1}},xAxis:[{type:"category",data:[],axisLine:{show:!1},splitLine:{show:!1},splitArea:{interval:"auto",show:!1}}],yAxis:[{type:"value",axisLine:{show:!1},splitLine:{show:!1}}],toolbox:{show:!1},series:[{name:"刻度盘",type:"gauge",startAngle:180,endAngle:0,center:["50%","80%"],z:3,min:0,max:this.maxValue,splitNumber:this.maxValue/20,radius:"90%",axisLine:{lineStyle:{width:10,color:[[.2,"#41C468"],[.4,"#70C1B3"],[.6,"#00A1E9"],[.8,"#EE4444"],[1,"#DCF2C4"]]}},axisTick:{length:19,splitNumber:2,lineStyle:{color:"#cdcdcd"}},splitLine:{length:20,lineStyle:{color:"auto"}},axisLabel:{textStyle:{color:"#454A57"}},pointer:{show:!0,length:"70%",width:5},itemStyle:{normal:{color:"#454A57",borderWidth:0}},title:{show:!0,offsetCenter:["0","20"],textStyle:{color:"#444A56",fontSize:12,fontFamily:"Microsoft YaHei"}},detail:{textStyle:{fontSize:12,color:"#707070"},offsetCenter:["0%","-50%"],formatter:this.valueFormatter},data:[{value:this.value,name:this.title}]},{name:"灰色内圈",type:"gauge",z:2,radius:"90%",startAngle:180,endAngle:0,center:["50%","80%"],splitNumber:4,axisLine:{lineStyle:{color:[[1,"#ccc"]],width:25,opacity:1}},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1},detail:{show:!1,textStyle:{fontWeight:"bolder",fontSize:12}}},{name:"第一阶段",type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#41C468"}}},{name:"第二阶段",type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#70C1B3"}}},{name:"第三阶段",type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#00A1E9"}}},{name:"第四阶段",type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#EE4444"}}},{name:"第五阶段",type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#DCF2C4"}}}]}}},mounted:function(){this.ringChartInit()},computed:{charResize:function(){return this.chartTrue&&this.ringCharts.resize(),r.a.state.vuexWidth}},watch:{value:function(t){this.chartOption.series[0].data[0].value=t,this.updateChart()}},methods:{ringChartInit:function(){this.ringCharts=this.$echarts.init(this.$refs.ringChart),this.ringCharts.setOption(this.chartOption),this.chartTrue=!0},updateChart:function(){this.ringCharts.setOption({series:[{data:[{value:this.value}]}]})}}},i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"ringChart",staticClass:"ring-chart",model:{value:t.charResize,callback:function(e){t.charResize=e},expression:"charResize"}})},staticRenderFns:[]};var s=a("Z0/y")(o,i,!1,function(t){a("8D38")},"data-v-364bf3f0",null);e.a=s.exports},"8D38":function(t,e){},AKNl:function(t,e,a){"use strict";var r={name:"floor-state",props:{floorData:Array,stateData:Array},watch:{floorData:function(t){this.floorIndex=0,this.floorHasLast=!1,this.floorHasNext=t.length>1}},data:function(){return{floorIndex:0,floorHasLast:!1,floorHasNext:!1}},methods:{lastFloor:function(){this.floorIndex--,this.floorHasLast=this.floorIndex>0,this.floorHasNext=this.floorIndex<this.floorData.length-1,this.$emit("onLastFloor",this.floorIndex)},nextFloor:function(){this.floorIndex++,this.floorHasLast=this.floorIndex>0,this.floorHasNext=this.floorIndex<this.floorData.length-1,this.$emit("onNextFloor",this.floorIndex)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"floor-state-top"},[a("div",{staticClass:"state-round-s"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.floorHasLast,expression:"floorHasLast"}],staticClass:"button-left",on:{click:function(e){t.lastFloor()}}},[a("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "),a("div",{staticClass:"state-round"},[t._v(t._s(t.floorData[t.floorIndex].floor_name)+"\n      "),a("div",{staticClass:"state-box"})]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.floorHasNext,expression:"floorHasNext"}],staticClass:"button-right",on:{click:function(e){t.nextFloor()}}},[a("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),a("div",{staticClass:"state-bottom"},[a("ul",t._l(t.stateData,function(e){return a("li",{style:{border:"1px solid #"+e.back}},[a("span",{style:{background:"#"+e.back}}),a("i",{style:{borderRight:"1px solid #"+e.back}}),t._v(t._s(e.name)+": "+t._s(e.numberSize)+"\n      ")])}))])])},staticRenderFns:[]};var i=a("Z0/y")(r,o,!1,function(t){a("TJ9U")},"data-v-228eca1d",null);e.a=i.exports},O6m3:function(t,e,a){"use strict";e.a=function(t,e,a,o){if(void 0!==i[e])return;i.push({vue:t,name:e,func:a,second:o}),r||(r=!0,s())};var r=!1,o=0,i=[],s=function t(){var e=!0;for(var a in i)i[a].vue&&!i[a].vue._isDestroyed?(e=!1,o%i[a].second||i[a].func()):delete i[a];o=4294967295!=o?o+1:0,e?r=!1:setTimeout(function(){t()},1e3)}},QPy3:function(t,e){},RfHK:function(t,e,a){"use strict";(function(t){var r=a("CaOM"),o=a("O6m3"),i=a("BSoj"),s=a("2UA2"),n=a("AKNl");e.a={name:"environment",components:{lineChart:i.a,ringChart:s.a,floorStater:n.a},data:function(){return{stateData:[{name:"总设备数",numberSize:"加载中...",back:"9ade31"},{name:"平均浓度",numberSize:"加载中...",back:"fbdc44"},{name:"最高浓度",numberSize:"加载中...",back:"f8aa2e"}],floorList:[{floor_name:"..."}],coChartDate:[{}],coAverage:"-1",coAverageMaxValue:Object(r.a)().config.coAverageMaxValue,tableData:[],tablePageTotal:0,tablePageSize:Object(r.a)().config.smallPageItemSize,userQuery:{build_id:this.$BuildId},userTableQuery:{page:1},requestUrl:{floorAreaListUrl:Object(r.a)().url.floorAreaList,environmentManagerUrl:Object(r.a)().url.environmentManager,environmentListUrl:Object(r.a)().url.environmentList}}},created:function(){this.getFloorAreaList()},mounted:function(){},methods:{lastFloor:function(t){this.userQuery.floor_id=this.floorList[t].floor_id,this.queryData(),this.userTableQuery.page=1,this.queryTableData()},nextFloor:function(t){this.userQuery.floor_id=this.floorList[t].floor_id,this.queryData(),this.userTableQuery.page=1,this.queryTableData()},handleCurrentChange:function(t){this.queryTableData()},getFloorAreaList:function(){var t=this,e=new FormData;for(var a in this.floorAreasQuery)e.append(a,this.floorAreasQuery[a]);this.$http.post(this.$Api+this.requestUrl.floorAreaListUrl,e,{dataType:"json"}).then(function(e){if(200==e.status){var a=e.data;void 0!==a.result&&1==a.result&&(t.floorList=a.floor_list,t.userQuery.floor_id=t.floorList[0].floor_id,t.queryData(),t.queryTableData(),Object(o.a)(t,"environment",function(){t.queryData()},5))}else t.$message({message:"获取floorAreaList失败："+e.status,duration:2e3,type:"error"})}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},queryData:function(){var t=this,e=new FormData;for(var a in this.userQuery)e.append(a,this.userQuery[a]);this.$http.post(this.$Api+this.requestUrl.environmentManagerUrl,e,{dataType:"json"}).then(function(e){if(200==e.status){var a=e.data;void 0!==a.result&&1==a.result&&(a.param.co_chart.length&&(t.coChartDate=a.param.co_chart.reverse()),t.stateData[0].numberSize=a.param.device_sum,t.stateData[1].numberSize=a.param.co_average+" ppm",t.stateData[2].numberSize=a.param.co_highest+" ppm",t.coAverage=a.param.co_average)}else t.$message({message:"获取environmentManager失败："+e.status,duration:2e3,type:"error"})}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},queryTableData:function(){var e=this,a=new FormData;for(var r in t.extend(this.userTableQuery,this.userQuery),this.userTableQuery)a.append(r,this.userTableQuery[r]);this.tableData=[],this.$http.post(this.$Api+this.requestUrl.environmentListUrl,a,{dataType:"json"}).then(function(t){if(200==t.status){var a=t.data;void 0!==a.result&&1==a.result&&(e.tableData=a.environment_list,e.tablePageTotal=a.total_page)}else e.$message({message:"获取environmentList失败："+t.status,duration:2e3,type:"error"})}).catch(function(t){e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})}}}}).call(e,a("L7Pj"))},TJ9U:function(t,e){}});
//# sourceMappingURL=2.f12d7a3b97edd3fb3f1d.js.map