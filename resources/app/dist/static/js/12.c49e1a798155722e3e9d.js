webpackJsonp([12],{dKQa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),n=a("4YfN"),c=a.n(n),l=a("9rMa"),r={name:"parking-state",data:function(){return{switchTaggle:!1,switchIn:!1,inputData:"24",select1:"",select2:"",userInfo:"",projectShow:!0,selectProject:"B0003",licence:"",hoursdate:"",hoursdate1:"",carType:"0",options1:[{value:"Today",label:"当天"}],options2:[{value:"Today",label:"当天"},{value:"tommorrow",label:"第二天"}],carTypes:[{label:"当天",value:"0"},{label:"第一天",value:"1"},{label:"第二天",value:"2"}],period:"0",periods:[{label:"上午",value:"0"},{label:"下午",value:"1"},{label:"晚上",value:"2"}],carArea:"0",carAreas:[{label:"1层",value:"0"},{label:"B1层",value:"1"},{label:"B2层",value:"2"}],area:"0",areas:[{label:"A区",value:"0"},{label:"B区",value:"1"},{label:"C区",value:"2"}],projects:[],net_state:""}},created:function(){var t=localStorage.getItem("userInfo");this.userInfo=JSON.parse(t),"admin"==this.userInfo.user_name?this.projectShow=!0:this.projectShow=!1,this.getSetList(),this.getBuildList(),this.getNetState(),this.getBuildID()},computed:{switchName:function(){return this.switchTaggle=this.$store.state.activeNote.text,this.$store.state.activeNote.text}},mounted:function(){this.switchTaggle="true"===localStorage.getItem("messagePush"),this.switchIn="true"===localStorage.getItem("OnToInNet")},methods:c()({},Object(l.b)(["add","upDate"]),{taggleSwitch:function(){localStorage.setItem("messagePush",this.switchTaggle)},taggleIn:function(){console.log(this.$Api),this.switchIn?(this.net_state=1,this.setNetState()):(this.net_state=2,this.setNetState())},getSetList:function(){var t=this,e=this.$Api+"/GOSSystem/getGeneralSettingParam",a=new URLSearchParams;a.append("user_id","beefind001"),a.append("build_id",this.$BuildId),this.$http({method:"POST",url:e,data:a}).then(function(e){1==e.data.result&&(t.hoursdate=e.data.start_hour,t.hoursdate1=e.data.end_hour,t.select1=e.data.start_day,t.select2=e.data.end_day,t.inputData=e.data.overtime)}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},setOverNight:function(){var t=this,e=this.$Api+"/GOSSystem/nightTimeConfig",a=new URLSearchParams;a.append("user_id","beefind001"),a.append("build_id",this.$BuildId),a.append("start_day",this.select1),a.append("start_hour",this.hoursdate),a.append("end_day",this.select2),a.append("end_hour",this.hoursdate1),console.log(e),console.log(this.select1+";select2="+this.select2),""!=this.select1&&""!=this.select2&&""!=this.hoursdate&&""!=this.hoursdate1?this.$http({method:"POST",url:e,data:a}).then(function(t){}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})}):this.warn()},setOverTime:function(){var t=this,e=this.$Api+"/GOSSystem/overTimeConfig",a=new URLSearchParams;a.append("user_id","beefind001"),a.append("build_id",this.$BuildId),a.append("overtime",this.inputData),""!=this.inputData?isNaN(this.inputData)?(this.inputData="",this.warn2()):this.$http({method:"POST",url:e,data:a}).then(function(t){}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})}):this.warn1()},setPost:function(t,e,a){var s=this,n=t;this.$http({method:"POST",url:e,emulateJSON:!0,data:i()(n)}).then(function(t){}).catch(function(t){s.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},warn:function(){this.$message({message:"请设置过夜时间!",type:"warning",center:!0})},warn1:function(){this.$message({message:"请设置停车超时时间!",type:"warning",center:!0})},warn2:function(){this.$message({message:"输入格式错误!",type:"warning",center:!0})},toast:function(t){this.$message({message:t,type:"warning",center:!0})},toastSuccess:function(t){this.$message({message:t,type:"success",center:!0})},changeProject:function(){console.log(this.selectProject);var t=this;t.getBuildSwitchLicence(function(){t.setBuildID()})},getBuildList:function(){var t=this,e=new URLSearchParams;e.append("cityID","0000");this.$http({method:"POST",url:"http://139.196.5.153:8080/mapserve/bllist",data:e}).then(function(e){if(1==e.data.result){var a=[];e.data.response.forEach(function(t){var e={};e.buildName=t.buildingName,e.build_id=t.buildingID,e.city_id=t.cityID,e.cityName=t.cityName,e.address=t.address,a.push(e)}),t.projects=a}else t.toast("获取项目列表失败!")}).catch(function(e){t.$notify({title:"ERROR",message:""+error,duration:2e3,type:"error"})})},getBuildSwitchLicence:function(t){var e=this,a=this.$csUrl+"/clientServer/getBuidSwitchLicence";this.$http({method:"get",url:a}).then(function(a){1==a.data.result?(e.licence=a.data.licence,t()):e.toast("当前用户无权限切换项目!")}).catch(function(t){e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},setBuildID:function(){var t=this,e=this.$csUrl+"/clientServer/setBuildID",a=new URLSearchParams;a.append("licence",this.licence),a.append("build_id",this.selectProject);var s={licence:this.licence,build_id:this.selectProject};this.$http({method:"POST",url:e,data:i()(s)}).then(function(e){1==e.data.result?t.toastSuccess("设置项目成功!"):t.toast("设置项目失败!")}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},getNetState:function(){var t=this,e=this.$csUrl+"/clientServer/getNetState";this.$http({method:"get",url:e}).then(function(e){1==e.data.result?(1==e.data.net_state?t.switchIn=!0:t.switchIn=!1,t.toastSuccess("获取内网状态成功!")):t.toast("获取内网状态失败!")}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},setNetState:function(){var t=this,e=this.$csUrl+"/clientServer/setNetState",a={net_state:this.net_state,build_id:this.selectProject};this.$http({method:"POST",url:e,data:i()(a)}).then(function(e){1==e.data.result?(eventbus.$emit("OnToInNet",t.switchIn,t.selectProject),localStorage.setItem("OnToInNet",t.switchIn),t.toastSuccess("设置内网成功!")):t.toast("设置内网失败!")}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},getBuildID:function(){var t=this,e=this.$csUrl+"/clientServer/getBuildID";this.$http({method:"get",url:e}).then(function(e){console.log(e),1==e.data.result?(t.selectProject=e.data.build_id||"B0003",console.log(t.selectProject)):t.toast("获取当前项目信息失败!")}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})}})},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"par-state main-padding"},[a("div",{staticClass:"general"},[a("div",{staticClass:"state-from"},[a("div",{staticClass:"general-nav"},[t._v("\n          过夜时间设置\n          ")]),t._v(" "),a("div",{staticClass:"general-input"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.select1,callback:function(e){t.select1=e},expression:"select1"}},t._l(t.options1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"general-input"},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"任意时间点","value-format":"H"},model:{value:t.hoursdate,callback:function(e){t.hoursdate=e},expression:"hoursdate"}})],1),t._v(" "),a("div",{staticStyle:{"line-height":"40px",color:"#cccccc"}},[t._v("\n            ___\n          ")]),t._v(" "),a("div",{staticClass:"general-input"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.select2,callback:function(e){t.select2=e},expression:"select2"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"general-input"},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"任意时间点","value-format":"H"},model:{value:t.hoursdate1,callback:function(e){t.hoursdate1=e},expression:"hoursdate1"}})],1),t._v(" "),a("div",{staticClass:"general-input"},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",round:""},on:{click:function(e){t.setOverNight()}}},[t._v("确认")])],1)]),t._v(" "),a("div",{staticClass:"state-from"},[a("div",{staticClass:"general-nav"},[t._v("\n        超时停车时间设置\n      ")]),t._v(" "),a("div",{staticClass:"general-input"},[a("el-input",{staticClass:"input-round",attrs:{placeholder:"    (单位:小时)",size:"small",type:"tel",clearable:""},model:{value:t.inputData,callback:function(e){t.inputData=e},expression:"inputData"}})],1),t._v(" "),a("div",{staticClass:"general-input"},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",round:""},on:{click:function(e){t.setOverTime()}}},[t._v("确认")])],1)]),t._v(" "),a("div",{staticClass:"state-from"},[a("div",{staticClass:"general-nav"},[t._v("\n        推送报警是否开启\n      ")]),t._v(" "),a("div",{staticClass:"general-input"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){t.taggleSwitch()}},model:{value:t.switchTaggle,callback:function(e){t.switchTaggle=e},expression:"switchTaggle"}})],1)]),t._v(" "),a("div",{staticClass:"state-from"},[a("div",{staticClass:"general-nav"},[t._v("\n        是否启用内网\n      ")]),t._v(" "),a("div",{staticClass:"general-input"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},on:{change:function(e){t.taggleIn()}},model:{value:t.switchIn,callback:function(e){t.switchIn=e},expression:"switchIn"}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.projectShow,expression:"projectShow"}],staticClass:"state-from"},[a("div",{staticClass:"general-nav"},[t._v("\n        管理项目\n      ")]),t._v(" "),a("div",{staticClass:"manage-project"},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目"},on:{change:t.changeProject},model:{value:t.selectProject,callback:function(e){t.selectProject=e},expression:"selectProject"}},t._l(t.projects,function(e){return a("el-option",{key:e.build_id,staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"},attrs:{label:e.buildName,value:e.build_id}},[a("span",[t._v(t._s(e.build_id))]),t._v(" "),a("span",[t._v(t._s(e.buildName))]),t._v(" "),a("span",[t._v(t._s(e.cityName))])])}))],1)])])])},staticRenderFns:[]};var u=a("Z0/y")(r,o,!1,function(t){a("unUI")},"data-v-c4711eec",null);e.default=u.exports},unUI:function(t,e){}});
//# sourceMappingURL=12.c49e1a798155722e3e9d.js.map