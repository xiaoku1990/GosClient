{"version":3,"sources":["webpack:///./static/img/rightVideo.png","webpack:///src/view/home/videoDemand.vue","webpack:///./src/view/home/videoDemand.vue?fd9e","webpack:///./src/view/home/videoDemand.vue","webpack:///./static/ol/shuidao.js"],"names":["module","exports","oldDate","videoDemand","name","data","_this2","this","value1","mapVisible","mapShow","choseDateValue","videoDateValue","demand","demandMap","featureDemand","sPeerID","oldsPeerID","sClientAddr","sClientVideoAddr","cameraResult","cameraPostDate","videoList","loading","deviceId","ce","map","choseDateOptions","disabledDate","time","length","getTime","Date","date","playerDemandOptions","overNative","autoplay","controls","techOrder","sourceOrder","preload","aspectRatio","flash","hls","withCredentials","swf","html5","sources","type","src","poster","notSupportedMessage","height","mounted","demandThis","d_map","findMapOOB","BeefindMap","target","$refs","myMap","floorUl","city_id","$CityId","build_id","$BuildId","urlLocal","$Api","floor_id","floorBarVisible","carLayerVisible","carPortLayerVisible","interLayerVisible","deviceLayerVisible","on","event","featureT","forEachFeatureAtPixel","pixel","localStorage","getItem","fmn","rannum","param","substring","toLocaleUpperCase","console","log","device_id","shuidao","pgConnectDelete","delete","setItem","beforeDestroy","removeEventListener","demandSPeerId","deleteDm","methods","handleApply","playerOptions","url","dialog","value","e","dialogVisible","dialogDemandHide","imgDemandMap","me","setTimeout","changePicker","result","open3","getVideoList","undefined","urlType","cameraUrl1","setDate","choseChangeDate","changeDateFormat","r","$localVideo","cameraUrl","area_id","dev_id","vuePost","open1","h","str1","substr","str2","parseFloat","str3","str4","combineCameraDate","d","dateNew","Object","$message","message","center","open2","open4","warnP2p","upFloor","evevt","warnMessage","downFloor","_this3","_this","reqData","params","URLSearchParams","append","$http","post","dataType","headers","Content-Type","then","response","video_list","addAttribute","catch","error","$notify","title","duration","handlePlay","index","row","playErr","handleDownload","formatDate","now","year","getFullYear","month","getMonth","getDate","hour","getHours","minute","getMinutes","second","getSeconds","c","timeDate","parseInt","start","timeStart","timeEnd","end","videoTime","showStart","showEnd","demandVideoUrl","$lookVideo","back","a","b","JSON","parse","tunnel","arrC","getVideoDateUrl","clientaddr","localVideoDateUrl","arrA","arrB","cameraDate","getCameraDate","localCameraDate","deleteVideo","date_list","concat","cameraVideoDate","backVideo","rt","pgConnectAdd","home_videoDemand","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticClass","attrs","gutter","xs","sm","md","lg","xl","format","value-format","picker-options","placeholder","change","model","callback","$$v","_v","click","id","$event","preventDefault","ref","options","err","__webpack_require__","alt","currentTarget","staticStyle","width","overflow-y","label","scopedSlots","_u","key","fn","scope","margin-left","_s","slot","text-align","size","$index","offset","stopPropagation","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","g_back","[object Object]","sType","sEncrypt","sListenAddr","pgTunnelRequest","pgTunnelCallback","uStatus","sResp","iInd","indexOf","sMeth","oResp","eval","alert","pgCommentSet","id_comment","comment","pgCommentGet"],"mappings":"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","file":"static/js/5.f5277982aa416c27b297.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTU0QjE4N0E0MUU3MTFFOEFFOTVFQzhGOEM5NEEyRjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTU0QjE4N0I0MUU3MTFFOEFFOTVFQzhGOEM5NEEyRjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NTRCMTg3ODQxRTcxMUU4QUU5NUVDOEY4Qzk0QTJGMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5NTRCMTg3OTQxRTcxMUU4QUU5NUVDOEY4Qzk0QTJGMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrcZIokAAAF/SURBVHjarNRNKARhHMfxXUscRHFw8RJpKUTJQUpxEOvCSe2FgwvtRTk7ODtQLpSj4iIHoU0cyWsKtcSBXIQDibx/n/qNpml2jbX/+hx2Z+b3PM//eWb8w333vlRW+i/X01CCICokKAGMYtotMF83VdoeMA+XIzPBgBPYwJk90PzYRQy16PrDCrMUGrIv6VWzeUMP1j0EfeAcKzjVCn9mGFZIvcIn0arrt5p5TA9e6B7Tv1K1Zg139sBDtKNT/4U18jaubf1sQhkyHLN9xpJzU3YwhGI8YAQnHvtY4zwWVh2jWstfxKfHwMd45/AIVRhDno7QYIIgM+As+uMFbiICv86WWfYVttCIQt03hXnsqT1WFaDBHniDNh0d08s6bYqpZQW+YEEDWpWtfhe5vXpfmHNZXkjXxhF1XAtYYc5N8VLNepNyk/042KtbZpCjoxZV733JzNAcpV41vwP72uHVZAOtetfrFlHvWv4b6NzEg1QGun6R/1tPGNBbc/ktwABDX1DGL+ocXgAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/img/rightVideo.png\n// module id = 6SEl\n// module chunks = 4 5","<template>\n  <div class=\"par-state main-padding\" v-loading=\"loading\">\n    <el-row :gutter=\"10\">\n      <el-col class=\"col-one\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\">\n        <!--<div class=\"grid-content bg-purple\"></div>-->\n        <div class=\"block\">\n          <!--<span class=\"demonstration\">{{videoDateValue}}</span>-->\n          <el-date-picker\n            type=\"date\"\n            v-model=\"choseDateValue\"\n            format=\"yyyy年MM月dd日\"\n            value-format=\"yyyyMMdd\"\n            :picker-options=\"choseDateOptions\"\n            @change=\"changePicker\"\n            placeholder=\"选择日期\">\n          </el-date-picker>\n          <el-button @click=\"getVideoList\">视频列表</el-button>\n\n\n        </div>\n        <!---->\n      </el-col>\n      <el-col class=\"col-two\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\">\n\n\n       <div  class=\"grid-content bg-purple\" id=\"vOne\" @click.prevent=\"dialog('vOne',$event)\"  >\n\n         <video-player class=\"vjs-custom-skin\" ref=\"videoPlayer\" :options=\"playerDemandOptions\"\n                       @err=\"playErr($event)\">\n         </video-player>\n\n\n          <img @click.self=\"imgDemandMap()\" class=\"videoIcon\" src=\"../../../static/img/rightVideo.png\" alt=\"\">\n        </div>\n\n      </el-col>\n      <el-col class=\"col-three\" :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xl=\"24\">\n\n        <el-table\n          :data=\"videoList\"\n          height=\"300\"\n          style=\"width: 100%;overflow-y: auto\">\n         <!-- <el-table-column\n            type=\"index\"\n            style=\"width: 25%\"\n          >\n          </el-table-column>-->\n          <el-table-column\n            label=\"视频顺序\" style=\"width: 25%\">\n            <template slot-scope=\"scope\">\n              <i class=\"el-icon-time\"></i>\n              <span style=\"margin-left: 10px\">{{ scope.row.index+1 }}</span>\n            </template>\n          </el-table-column>\n          <!--<el-table-column\n            label=\"视频结束ID\" style=\"width: 25%\">\n            <template slot-scope=\"scope\">\n              <el-popover trigger=\"hover\" placement=\"top\">\n                <div slot=\"reference\" class=\"name-wrapper\">\n                  <el-tag size=\"medium\">{{ scope.row.end_ID }}</el-tag>\n                </div>\n              </el-popover>\n            </template>\n          </el-table-column>-->\n          <el-table-column\n            label=\"视频开始时间/结束时间\"\n            style=\"width: 35%\">\n            <template slot-scope=\"scope\">\n                <div slot=\"reference\" class=\"name-wrapper\">\n                  {{ scope.row.showStart }}~{{scope.row.showEnd}}\n                </div>\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"视频时长\"\n            style=\"width: 20%\">\n            <template slot-scope=\"scope\">\n                <div slot=\"reference\" class=\"name-wrapper\">\n                  {{ scope.row.videoTime }}\n                </div>\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"操作\"  style=\"width: 20%;text-align: center;\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                @click=\"handlePlay(scope.$index, scope.row)\">播放</el-button>\n             <!-- <el-button\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"handleDownload(scope.$index, scope.row)\">下载</el-button>-->\n            </template>\n          </el-table-column>\n        </el-table>\n\n\n\n\n      </el-col>\n\n    </el-row>\n    <!---->\n    <!--弹出框-->\n    <div class=\"demandDialog\"  v-show=\"mapVisible\">\n\n\n      <div class=\"demandDialogInfo\" :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\" :offset=\"6\">\n        <ul>\n          <li>\n            <ul>\n              <li> 请选择视频点播的设备</li>\n              <li> <i class=\"el-icon-error\" @click.stop=\"dialogDemandHide()\"></i> </li>\n            </ul>\n          </li>\n          <li>\n            <!---->\n\n            <!---->\n            <div id=\"demandMap\"   ref=\"myMap\" v-show=\"mapShow\">\n\n\n            </div>\n            <!---->\n            <img src=\"../../../static/img/up.png\" alt=\"up\" @click=\"upFloor()\" class=\"up\">\n            <div id=\"floor\">\n              <ul id=\"floorUl\" ref=\"floorUl\">\n\n              </ul>\n            </div>\n            <img src=\"../../../static/img/down.png\" alt=\"down\" @click=\"downFloor()\" class=\"down\">\n            <!---->\n          </li>\n        </ul>\n        <!---->\n      </div>\n      <!---->\n    </div>\n    <!---->\n\n    <!---->\n  </div>\n  <!---->\n\n</template>\n\n<script>\n   import { module } from \"../../../static/ol/findMapOOB\"\n   import  tunnel from \"../../../static/ol/shuidao\"\n   //穿透\n   //import { videoPlayer } from \"vue-video-player\"\n   //---------------------------------------------\n\n var myVideo;\n   var oldDate;\n    export default {\n        name: \"video-demand\",\n        data(){\n          return{\n            value1:'',\n            mapVisible:false,\n            mapShow:true,\n            choseDateValue:'',//选择的日期\n            videoDateValue:[],//获取的所有有视频的日期()\n            demand:true,\n            demandMap:'',\n            featureDemand:'',//点播p2p的设备要素\n            sPeerID:'',//新的设备标识\n            oldsPeerID:'',//上一个设备的标识\n            sClientAddr:'',//隧道的获取数据客户端地址\n            sClientVideoAddr:'',//隧道观看视频的客户端地址\n            cameraResult:'',//日期返回数据\n            cameraPostDate:'',//摄像头获取视频列表所需参数\n            videoList:[],//获取摄像头的某天的视频列表\n            loading:false,//加载动画\n            deviceId:'',//设备Id\n            ce:true,\n            map:'',//点播地图\n            choseDateOptions:{\n              //let cs=1;\n              disabledDate: (time) => {\n                //console.log(this.videoDateValue.length);\n                if(this.videoDateValue.length>=1) {\n\n                       if(time.getTime() < new Date(this.videoDateValue[0].date).getTime()||time.getTime() > new Date(this.videoDateValue[this.videoDateValue.length-1].date).getTime()){\n\n                           return true;//符合条件的日期会被禁掉\n                       };\n                       return false;\n                }\n             }\n            },\n            playerDemandOptions: {\n              overNative: true,\n              autoplay: false,\n              controls: true,\n              techOrder: ['html5', 'flash'],\n              sourceOrder: true,\n              preload: 'auto',\n              aspectRatio: '16:9',\n              flash: {\n                hls: { withCredentials: false },\n                swf: '/static/media/video-js.swf'\n              },\n              html5: { hls: { withCredentials: false } },\n              sources: [\n                {\n                  type: 'application/x-mpegURL',\n                  src:''\n                },\n                {\n                  withCredentials: false,\n                  type: 'application/x-mpegURL',\n                  src: ''\n                }\n              ],\n              poster:'/static/img/video/camera.png',\n              notSupportedMessage: '此视频暂无法播放，请稍后再试',\n              height:'350'\n\n            /*  //\n              autoplay: false,\n              controls: true,\n              sources: [{\n                type: \"rtmp/flv\",\n                src:'http://192.168.0.228/live/20180504/8/10658837017.m3u8'\n                //src: \"https://cdn.theguardian.tv/webM/2015/07/20/150716YesMen_synd_768k_vp8.webm\"\n              }],\n              height:'350'*/\n            }\n\n\n          }\n        },\n        mounted(){\n\n           var demandThis=this;\n\n          //map\n          var d_map= new module.BeefindMap({\n            \"target\": demandThis.$refs.myMap,\n            \"floorUl\":demandThis.$refs.floorUl,\n            \"city_id\":this.$CityId,//城市ID\n            \"build_id\":this.$BuildId,//項目ID\n            'urlLocal':this.$Api,\n            \"floor_id\" :\"\",//樓層ID\n            \"floorBarVisible\":true,//楼层控件\n            \"carLayerVisible\":true,//车位层是否显示(默认显示)\n            \"carPortLayerVisible\":true,//车位号层是否显示(默认显示)\n            \"interLayerVisible\":true,//兴趣点层是否显示(默认显示)\n            \"deviceLayerVisible\":true//设备层是否显示(默认不显示)\n          });//\n          //\n          demandThis.map=d_map;\n          //console.log(demandThis.demandMap);\n          //var featureT;\n          var localUrl='http://192.168.0.100:8421';\n          var localVideoUrl='http://192.168.0.100:8821';\n          demandThis.map.on('click',function (event) {\n\n            var featureT =demandThis.map.forEachFeatureAtPixel(event.pixel, function (featureT) {\n              return featureT;\n            });\n            if (featureT) {\n               var clickvideo=localStorage.getItem('clickMap');\n              //----------------------\n              if(clickvideo=='3'){\n\n                if(featureT.type=='camera'){\n                   demandThis.featureDemand=featureT;\n                  let fmn;//用于拼接的设备ID(5位)前面补0\n                  let rannum;//用于拼接的分区ID(3位)前面补0\n                  let buID;//用于拼接的项目ID(首字符小写)\n                  //fmn=featureT.param.fmn;\n                  //rannum=featureT.param.rannum;\n                  //使用es6新方法;string.padstart('maxlength','0')\n                  //浏览器兼容问题，个别浏览器是不支持的!(360)\n                  if(featureT.param.fmn>=10000){\n                    fmn=featureT.param.fmn;\n                  }else if(featureT.param.fmn>=1000){\n                    fmn='0'+featureT.param.fmn;\n                  }else if(featureT.param.fmn>=100){\n                    fmn='00'+featureT.param.fmn;\n                  }else if(featureT.param.fmn>=10){\n                    fmn='000'+featureT.param.fmn;\n                  }else{\n                    fmn='0000'+featureT.param.fmn;\n                  };//\n                  //console.log(typeof (fmn));\n                  //console.log(fmn.toString());\n                  //console.log(fmn.toString());\n                  //'51'.padStart(5,'0');\n\n                  //-------------------------\n                  if(featureT.param.rannum>=100){\n                    rannum=featureT.param.rannum;\n                  }else if(featureT.param.rannum>=10){\n                    rannum='0'+featureT.param.rannum;\n                  }else {\n                    rannum = '00' + featureT.param.rannum;\n                  };\n                  //rannum.toString().padStart(3,'0');\n                  //-------------------------\n                  buID= demandThis.$BuildId.substring(0,1).toLocaleUpperCase()+ demandThis.$BuildId.substring(1);\n                  let sPeerID=buID+rannum+fmn;//新的ID\n                  let sType = 0;\n                  let sEncrypt=0;\n                  let sListenAddr='127.0.0.1:8421';//\n\n                  //直播的端口:1935(RTMP)\n                  let sClientAddr='127.0.0.1:12351';//(点播(获取数据)要用的url)\n\n                  demandThis.sClientAddr=sClientAddr;\n\n                  demandThis.sPeerID=sPeerID;\n                  //demandThis.oldsPeerID=localStorage.getItem('demandSPeerId');\n                  oldDate=localStorage.getItem('demandSPeerId');\n\n                  console.log(oldDate);\n                  demandThis.loading=true;\n                  demandThis.device_id=featureT.param.fmn;\n\n                  //删除并建立获取视频数据的隧道\n                  demandThis.videoDateValue=[];\n                  demandThis.videoList=[];\n                  demandThis.choseDateValue=\"\";\n                  demandThis.playerDemandOptions.sources[0].src=\"\";\n                  demandThis.playerDemandOptions.autoplay=false;\n                  tunnel.pgConnectDelete(oldDate,sType,sEncrypt,sListenAddr,sClientAddr,demandThis.delete);\n\n                  //localStorage.setItem('demandSPeerId',demandThis.sPeerID);\n\n                  //console.log('rannum='+featureT.param.rannum+'; fmn='+featureT.param.fmn);\n                  /*var cameraIp = module.getVideoUrl(localUrl, featureT.param.fmn, featureT.param.rannum);\n                  console.log(cameraIp);\n                  var cameraUrl;\n                  if(cameraIp.ip!=\"\"&&cameraIp.ip!=undefined&&cameraIp.ip!=null){\n                    cameraUrl = 'http://' + cameraIp.ip + ':8421';\n                    var localVideoUrl= 'http://192.168.0.100:8821';\n                  }else {\n                    cameraUrl=\"\";\n                  };//\n                  //console.log(cameraUrl);\n                  //var cameraDate = module.getCameraDate(localVideoUrl,feature.build_id,feature.param.rannum,feature.param.fmn);\n                  if(cameraUrl=='http://192.168.0.0:8421'||cameraUrl==\"\"||cameraUrl==undefined||cameraUrl==null){\n                    demandThis.open4();\n                  }else {\n                    demandThis.loading=true;\n                    //摄像头服务\n                    var cameraDate = module.getCameraDate(cameraUrl,featureT.build_id,featureT.param.rannum,featureT.param.fmn);\n                    console.log(cameraDate);\n                    //console.log(arrA);\n                    //本地视频服务\n                    demandThis.device_id=featureT.param.fmn;\n                    var localCameraDate = module.getCameraDate(localVideoUrl,featureT.build_id,featureT.param.rannum,featureT.param.fmn);\n                    //console.log(localCameraDate);\n                    if(cameraDate.result==0&&localCameraDate.length==0){\n                      demandThis.open2();\n                      demandThis.loading=false;\n                      // console.log(cameraDate);\n                    }else {\n                      demandThis.loading=false;\n                      //设备有视频;\n                      var arrA=[];\n                      demandThis.cameraResult=cameraDate;\n                      if(cameraDate.result!=0){\n                        arrA=demandThis.combineCameraDate('camera',cameraDate.date_list);\n                      };\n                      var arrB=demandThis.combineCameraDate('local',localCameraDate);\n                      var arrC=arrA.concat(arrB);\n                      console.log(arrC);\n\n                      console.log(cameraDate);\n\n                      //做个判断(if(camera){}else{localVideo})\n\n                      //\n                      var cameraVideoUrl = 'http://' + cameraIp.ip + ':8421';\n                      var demandVideoUrl = 'http://' + cameraIp.ip;\n                      var cameraVideoDate={\n                        demandVideoUrl:demandVideoUrl,\n                        cameraUrl:cameraVideoUrl,\n                        build_id:featureT.build_id,\n                        area_id:featureT.param.rannum,\n                        dev_id:featureT.param.fmn\n                      };\n                      demandThis.cameraPostDate=cameraVideoDate;\n                      //\n                      demandThis.open1();\n                      //console.log(cameraDate);\n                      //demandThis.videoDateValue=cameraDate.date_list;\n                      demandThis.videoDateValue=arrC;\n                      demandThis.videoDateValue=demandThis.changeDateFormat(demandThis.videoDateValue,demandThis.videoDateValue.length);\n                      console.log(demandThis.videoDateValue);\n                      demandThis.mapVisible = false;\n\n                    };// if(cameraDate.result==0&&localCameraDate.length==0){\n                    //console.log(cameraUrl);\n                    //diaThis.streams.rtmp=cameraUrl;\n\n                  };//if(cameraUrl=='http://192.168.0.0:8421')*/\n\n                };// if(featureT.type=='camera')\n\n                //---------------\n              };// if(clickvideo=='1')\n              //-----------------------\n            };//(featureT)\n\n          });\n          //\n          localStorage.setItem('clickMap','3');\n\n        //-------\n        },\n        beforeDestroy(){\n          const mapThis=this;\n          mapThis.map.removeEventListener('singleclick');\n          let sType = 0;\n          let sEncrypt=0;\n\n          let sListenAddr='127.0.0.1:8421';//\n          let sClientAddr='127.0.0.1:12351';\n\n          let sListenVideoAddr='127.0.0.1:80';//\n          let sClientVideoAddr='127.0.0.1:2018';//(点播（查看视频）要用的url)\n\n          let demandSPeerId=localStorage.getItem('demandSPeerId');\n          //qingc清除8421/80的两个隧道;\n          tunnel.pgConnectDelete(demandSPeerId,sType,sEncrypt,sListenAddr,sClientAddr,this.deleteDm);\n          tunnel.pgConnectDelete(demandSPeerId,sType,sEncrypt,sListenVideoAddr,sClientVideoAddr,this.deleteDm);\n          this.playerDemandOptions.sources[0].src=\"\";\n          this.playerDemandOptions.autoplay=false;\n        },\n      methods:{\n        handleApply () {\n          this.playerOptions.sources[0].src = this.url\n        },\n        dialog(value,e){\n          //console.log(value);\n          this.dialogVisible=true;\n          //var srcVideo='rtmp://live.hkstv.hk.lxdns.com/live/hks';\n        },\n        dialogDemandHide(){\n          this.mapVisible=false;\n          this.map.target(null);\n          //---------------\n        },\n        imgDemandMap(){\n          this.mapVisible=true;\n          //this.map.init();\n          var me=this;\n          //\n          me.map.target(null);\n          setTimeout(function(){\n            if(me.mapVisible){\n              me.map.target(me.$refs.myMap);\n            }\n          },100)\n\n        },\n        changePicker(){\n          console.log('changePicker');\n          console.log(this.cameraResult.result);\n          if(this.cameraResult.result!=1){\n            this.open3();\n            this.choseDateValue=\"\";\n          };\n          //console.log(this.choseDateValue);\n          if(this.choseDateValue==null){\n             this.videoList=[];\n             this.videoDateValue=[];\n            this.cameraResult.result=0;\n            this.playerDemandOptions.sources[0].src=\"\";\n            this.playerDemandOptions.autoplay=false;\n          }else {\n            this.videoList=[];\n            this.playerDemandOptions.sources[0].src=\"\";\n            this.playerDemandOptions.autoplay=false;\n          };\n\n        },\n        getVideoList(){\n          //-----------\n          //this.loading=true;\n          //console.log(this.loading);\n          //console.log(this.videoDateValue.length!=0);\n\n           if(this.videoDateValue.length!=0){\n\n               //console.log(this.choseDateValue);\n             if(this.choseDateValue!=\"\"&&this.choseDateValue!=undefined&&this.choseDateValue!=null){\n\n               this.loading=true;\n               //console.log(this.choseDateValue);\n               var setDate=[{\n                 date:this.choseDateValue\n               }];\n               var choseChangeDate=this.changeDateFormat(setDate,setDate.length);\n\n                //console.log(choseChangeDate);\n                //console.log(this.videoDateValue);\n                //\n                var urlType;\n\n                for(var r=0;r<this.videoDateValue.length;r++){\n                  if(this.videoDateValue[r].date==choseChangeDate[0].date){\n                    urlType=this.videoDateValue[r].type;\n                    //console.log(urlType);\n                    break;\n                  }else {\n                    urlType='camera';\n                  };\n                };\n                //\n\n               //console.log(urlType);\n               //console.log(this.cameraPostDate.cameraUrl);\n               var cameraUrl1;\n               if(urlType=='local'){\n                 //http://beefindtech.cn:10007/live/\n                 //cameraUrl1='http://beefindtech.cn:50005/getVideoList';//test(B0007)\n                 cameraUrl1=this.$localVideo+'/getVideoList';//formal(正式项目花生壳)(B0005)\n               }else {\n                 //(差穿透的会换地址)\n                 cameraUrl1=this.cameraPostDate.cameraUrl+'/getVideoList';\n               };//\n\n               console.log(cameraUrl1);\n\n              //console.log(this.cameraPostDate);\n              var date={\n                build_id:this.cameraPostDate.build_id,\n                area_id:this.cameraPostDate.area_id,\n                dev_id:this.cameraPostDate.dev_id,\n                date:this.choseDateValue\n              };//\n              this.playerDemandOptions.sources[0].src=\"\";\n              this.playerDemandOptions.autoplay=false;\n              //\n              this.vuePost(date,cameraUrl1,urlType);\n             }else{\n               //this.loading=false;\n               //console.log('else!');\n               this.open1();\n             };////\n             //\n\n\n            }else{\n              //this.loading=false;\n              this.open3();\n            };\n\n\n\n          //------------\n\n        },\n        changeDateFormat(date,length){\n           for(var h=0;h<length;h++){\n              var str1=date[h].date.substr(0,4);\n              var str2=date[h].date.substr(4,2);\n              if(parseFloat(str2)>=10){\n                str2=str2;\n              }else {\n                str2=str2.substr(1,1);\n              };\n              var str3=date[h].date.substr(6,2);\n             if(parseFloat(str3)>=10){\n               str3=str3;\n             }else {\n               str3=str3.substr(1,1);\n             };\n              var str='/';\n              var str4=str1+str+str2+str+str3;\n              date[h].date=str4;\n           };\n           return date;\n        },\n        combineCameraDate(type,date){\n          //合并视频日期函数\n          for(var d=0;d<date.length;d++){\n            var dateNew=date[d];\n            date[d]=new Object();\n              date[d].date=dateNew;\n              date[d].type=type;\n          };\n          return date;\n\n        },\n        open1() {\n          this.$message({\n            message: '请选择视频播放日期!',\n            type: 'success',\n            center:true\n          });\n        },\n        open2() {\n          this.$message({\n            message: '对不起,当天没有视频!',\n            type: 'warning',\n            center:true\n          });\n        },\n        open3(){\n          this.$message({\n            message: '请选择设备!',\n            type: 'warning',\n            center:true\n          });\n        },\n        open4() {\n          this.$message({\n            message: '当前设备没有视频源!',\n            type: 'warning',\n            center:true\n          });\n        },\n        warnP2p(){\n          this.$message({\n            message: 'p2p连接失败!',\n            type: 'warning',\n            center:true\n          });\n        },\n        upFloor(){\n          var self=this;\n          module.upFloor(clickSuccess);\n          function clickSuccess(evevt){\n\n          };\n        },\n        warnMessage(date){\n          this.$message({\n            message: date,\n            type: 'warning',\n            center:true\n          });\n        },\n        downFloor(){\n          var self=this;\n          module.downFloor(clickSuccess);\n          function clickSuccess(event){\n\n          };\n        },\n        vuePost(date,url,urlType){\n\n          var _this=this;\n          var reqData= date;\n          //\n          var params = new URLSearchParams();\n          params.append('build_id', reqData.build_id);\n          params.append('area_id', reqData.area_id);\n          params.append('dev_id', reqData.dev_id);\n          params.append('date', reqData.date);\n          this.$http.post(\n            url,\n              params,\n            {\n                dataType:'json',\n                headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                }\n             }\n            ).then(function (response) {\n              console.log(response);\n              //获取的(点播列表)//\n            if(response.data.result=='0'){\n              _this.warnMessage('当天的摄像头无视频源,请选择其它日期!');\n            }else{\n              _this.videoList=response.data.video_list;\n              //更改点播列表的属性\n              _this.addAttribute(_this.videoList,urlType);\n              //console.log(response);\n            };\n            _this.loading=false;\n            //------------------\n            //console.log(_this.videoList);\n            //console.log(urlType);\n            //-------------------\n\n\n\n          })\n            .catch((error) => {\n              _this.loading = false;\n              this.$notify({\n                title: 'ERROR',\n                message: `${error}`,\n                duration: 2000,\n                type: 'error'\n              });\n            });\n\n        },\n        handlePlay(index, row) {\n          //console.log(index, row);\n          //点击视频播放列表进行播放\n          this.playerDemandOptions.sources[0].src=row.url;\n          this.playerDemandOptions.autoplay=true;\n\n\n        },\n        playErr(date){\n          console.log(date);\n        },\n        handleDownload(index, row) {\n          //console.log(index, row);\n        },\n        formatDate(now,type) {\n          //console.log(now);\n          var year=now.getFullYear();\n           var month=now.getMonth()+1;\n           var date=now.getDate();\n           var hour=now.getHours();\n           var minute=now.getMinutes();\n           var second=now.getSeconds();\n           if(type=='hour'){\n             //-------------------\n             if(minute==0){\n               return second+'秒';\n             }else if(minute<=60){\n               return +minute+'分'+second+'秒';\n             };//\n             //---------------------\n           }else if(type=='onlyHour'){\n             return hour;\n           }else if(type=='ymd'){\n             return year+'/'+''+month+'/'+''+date;\n           }else{\n             return year+'/'+''+month+'/'+''+date+'/'+''+hour+':'+''+minute+':'+second;\n           };\n\n          //return now;\n        },\n        addAttribute(date,urlType){\n           var startStamp=1514736000000;//2018年1月1日000;\n           for(var c=0;c<date.length;c++){\n               var timeDate=parseInt(date[c].start)+parseInt(startStamp);\n               var timeStart=parseInt(date[c].start)+parseInt(startStamp);\n               var timeEnd=parseInt(date[c].end)+parseInt(startStamp);\n             //console.log(timeDate);\n             date[c].videoTime= this.formatDate(new Date(timeEnd-timeStart),'hour');\n             date[c].index=c;\n\n             date[c].time=this.formatDate(new Date(timeDate),'onlyHour');\n\n             date[c].showStart=this.formatDate(new Date(timeStart),'fullYear');\n\n             date[c].showEnd=this.formatDate(new Date(timeEnd),'fullYear');\n\n             //console.log(urlType);\n             //console.log(this.cameraPostDate.demandVideoUrl);\n\n             if(urlType=='camera'){\n               //摄像头的穿透!\n               date[c].url=this.cameraPostDate.demandVideoUrl+'/live/'+this.choseDateValue+'/'+date[c].time+'/'+date[c].start+'.m3u8';\n             }else {\n               date[c].url=this.$lookVideo+this.device_id+'/'+this.choseDateValue+'/'+date[c].time+'/'+date[c].start+'.m3u8';//test(B0007)\n               //date[c].url='http://b2005.51beefindtech.com:7080/live/'+this.device_id+'/'+this.choseDateValue+'/'+date[c].time+'/'+date[c].start+'.m3u8';//(B0005)\n             };\n             //\n             //\n             //\n             //console.log(date[c].url);\n           };\n        },\n        back(a, b) {\n          //console.log('back!!');\n          var b=JSON.parse(b);\n\n          //console.log(b);\n\n          this.dialogDemandHide();\n          let sType = 0;\n          let sEncrypt=0;\n          let sListenVideoAddr='127.0.0.1:80';//\n          let sClientVideoAddr='127.0.0.1:2018';//(点播（查看视频）要用的url)\n          this.sClientVideoAddr=sClientVideoAddr;\n          //let localUrl='http://192.168.0.100:8421';\n          if(b.result=='0'){\n            this.tunnel=true;//隧道建立成功!\n\n\n            //const cameraDate = module.getVideoUrl(localUrl, this.feature.param.fmn, this.feature.param.rannum);\n\n\n            const getVideoDateUrl = 'http://' + b.clientaddr;//摄像头的URL\n            //const localVideoDateUrl = 'http://beefindtech.cn:50005';//本地视频服务的URL(testB0007)\n            const localVideoDateUrl = this.$localVideo;//本地视频服务的URL(正式项目B0005)\n            //http://beefindtech.cn:8007\n            //console.log(getVideoDateUrl);\n            //\n\n            //获取摄像头的设备的有视频的日期；\n            let arrA;//摄像头里的有视频的日期\n            let arrB=[];//本地视频的日期\n            let arrC=[];//所有的有视频的日期\n            let cameraDate = module.getCameraDate(getVideoDateUrl,this.featureDemand.build_id,this.featureDemand.param.rannum,this.featureDemand.param.fmn);\n            let localCameraDate = module.getCameraDate(localVideoDateUrl,this.featureDemand.build_id,this.featureDemand.param.rannum,this.featureDemand.param.fmn);\n            //console.log(cameraDate);\n            //arrB=localCameraDate||[];\n            arrB=localCameraDate.result==0?[]:localCameraDate;\n            //const test={}\n            //arrB=['20180530'];//模拟获取到本地视频服务器\n\n            arrB=this.combineCameraDate('local',arrB);\n            //this.oldsPeerID=localStorage.getItem('demandSPeerId');\n            //console.log(arrB);\n            if(cameraDate.result=='0'){\n              this.open4();\n              //无视频源\n              this.videoDateValue=[];\n              this.loading=false;\n            }else {\n              //有视频(我才建立点播隧道)\n              //删除并建立查看视频的的隧道\n\n\n              tunnel.pgConnectDelete(oldDate,sType,sEncrypt,sListenVideoAddr,sClientVideoAddr,this.deleteVideo);\n              //\n              this.cameraResult=cameraDate;\n              //arrA是摄像头里面的是视频(用穿透)\n              //arrB是本地服务器的视频(用花生壳)\n              //arrC是最终的视频源数组\n              arrA=this.combineCameraDate('camera',cameraDate.date_list);\n              //console.log(arrA);\n              /*\n              * 这里有个数组的合并\n              * */\n             /* let cameraVideoDate={\n                demandVideoUrl:\"\",//视频的url\n                cameraUrl:getVideoDateUrl,//获取点播列表的Url\n                build_id:this.featureDemand.build_id,\n                area_id:this.featureDemand.param.rannum,\n                dev_id:this.featureDemand.param.fmn\n              };\n              this.cameraPostDate=cameraVideoDate;\n              //\n              this.videoDateValue=arrA;\n              this.videoDateValue=this.changeDateFormat(this.videoDateValue,this.videoDateValue.length);//是用来处理日历的\n\n              console.log(this.videoDateValue);*/\n\n              this.open1();\n              this.loading=false;\n            };//\n            //---------------\n            arrC=arrB.concat(arrA);\n            //console.log(arrC);\n            if(arrC.length>=1){\n              let cameraVideoDate={\n                demandVideoUrl:\"\",//视频服务的url\n                cameraUrl:getVideoDateUrl,//获取点播列表的Url\n                build_id:this.featureDemand.build_id,\n                area_id:this.featureDemand.param.rannum,\n                dev_id:this.featureDemand.param.fmn\n              };\n              this.cameraPostDate=cameraVideoDate;\n              //\n              this.videoDateValue=arrC;\n              //console.log(this.videoDateValue);\n              //操作日历\n              this.videoDateValue=this.changeDateFormat(this.videoDateValue,this.videoDateValue.length);\n\n              this.open1();\n              this.loading=false;\n            }else{\n\n            };//*/\n            //this.videoSrc = cameraUrl;\n            //console.log(this.clickVideo);\n            /*this.streams.rtmp=cameraUrl;\n            this.enterStream(this.playerOptions,this.clickVideo);\n            */\n            //\n\n          }else{\n\n            this.warnP2p();\n            this.loading=false;\n           // this.tunnel=false;\n            //穿透失敗!\n          };\n\n          //return result;\n        },\n        backVideo(a, b) {\n          //console.log('back!!');\n          var b=JSON.parse(b);\n          console.log(b);\n          //let localUrl='http://192.168.0.100:8421';\n          if(b.result=='0'){\n            //添加查看视频的URL\n            this.cameraPostDate.demandVideoUrl='http://'+b.clientaddr;\n          }else {\n            this.open1();\n          };\n        },\n        deleteDm(a,b){\n\n        },\n        delete(a, b){\n          //删除隧道的回调函数\n          //console.log('delete!!!');\n          let rt=b.substring(3);\n          rt=JSON.parse(rt);\n\n          let sType = 0;\n          let sEncrypt=0;\n          let sListenAddr='127.0.0.1:8421';//\n          if(rt.result=='18'||rt.result=='0'){\n            tunnel.pgConnectAdd(this.sPeerID,sType,sEncrypt,sListenAddr,this.sClientAddr, this.back);\n          }else {\n\n          };//\n          this.dialogDemandHide();\n        },\n        deleteVideo(a, b){\n          //删除隧道的回调函数\n          //console.log('deleteVideo!!!');\n          let rt=b.substring(3);\n          rt=JSON.parse(rt);\n\n          let sType = 0;\n          let sEncrypt=0;\n          let sListenAddr='127.0.0.1:80';//\n          //this.oldsPeerID=localStorage.getItem('demandSPeerId');\n          //console.log(this.oldsPeerID)\n          //if(rt.result=='18'||rt.result=='0'){\n            tunnel.pgConnectAdd(this.sPeerID,sType,sEncrypt,sListenAddr,this.sClientVideoAddr, this.backVideo);\n          //};//\n\n          localStorage.setItem('demandSPeerId',this.sPeerID);\n          //this.dialogDemandHide();\n        },\n      }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n  .par-state {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: stretch;\n    height: calc(100% - 120px);\n    width: calc(100% - 226px);\n    /*border:1px solid #ff0000;*/\n  }\n  .el-row{\n    width: 100%;\n  }\n  .el-col {\n    border-radius: 4px;\n    /*border: 1px solid #ff3b52;*/\n  }\n  .col-one{\n    height: 50px;\n    line-height: 50px;\n    text-align: right;\n\n  }\n  .col-two{\n    height: 400px;\n    line-height: 400px;\n\n    text-align: center;\n    /*border:1px solid #ff3b52;*/\n\n  }\n  .col-three{\n    height: 300px;\n    /*overflow-y: auto;*/\n\n  }\n  .col-four{\n    height: 50px;\n\n  }\n  .bg-purple-dark {\n    background: #99a9bf;\n  }\n  .bg-purple {\n    background: #d3dce6;\n  }\n  .bg-purple-light {\n    background: #e5e9f2;\n  }\n  .grid-content {\n    display: inline-block;\n    border-radius: 4px;\n    min-height: 337.5px;\n    width: 42%;\n    min-width: 600px;\n    margin-top: 1vh;\n    height: auto;\n    position: relative;\n    /*border:1px solid #00ff00;*/\n  }\n/*map*/\n  .demandDialog{\n    width: 100%;\n    height: 100%;\n    /*border:1px solid #ff0000;*/\n    border-radius: 3px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    /*z-index: 2010;*/\n    background: rgba(0,0,0,0.4);\n    text-align: center;\n    display: block;\n  }\n  .demandDialogInfo{\n    width: 46vw;\n    height: 58vh;\n    /*min-width: 400px;*/\n    min-height: 450px;\n    /*border:1px solid #ff0000;*/\n    border-radius: 3px;\n    position: relative;\n    z-index: 2011;\n    top: 12vh;\n    left: 22%;\n    background: white;\n    /*z-index: 2001;*/\n  }\n  .demandDialogInfo>ul{\n    width: 46vw;\n    height: 58vh;\n    //min-height: 400px;\n    /*min-width: 400px;*/\n    /*border:1px solid #ff0000;*/\n  }\n  .demandDialogInfo>ul>li:nth-child(1){\n    height: 8vh;\n    min-height: 50px;\n    line-height: 8vh;\n    text-align: right;\n    /*border: 1px solid #00FF00;*/\n    border-bottom: 1px solid #cccccc;\n  }\n  .demandDialogInfo>ul>li:nth-child(1)>ul{\n    width: 46vw;\n\n  }\n  .demandDialogInfo>ul>li:nth-child(1)>ul>li:nth-child(1){\n    width: 41vw;\n    /*border: 1px solid #00FF00;*/\n    float: left;\n    text-align: center;\n  }\n  .demandDialogInfo>ul>li:nth-child(1)>ul>li:nth-child(2){\n    width: 5vw;\n    /*border: 1px solid #00FF00;*/\n    float: left;\n    text-align: center;\n  }\n  .demandDialogInfo>ul>li:nth-child(2){\n    height: 50vh;\n    min-height: 400px;\n    /*border:1px solid #00FF00;*/\n  }\n  /**/\n  #demandMap{\n    width: 41vw;\n    height: 50vh;\n    /*min-width: 400px;*/\n    min-height: 400px;\n    /*border:2px solid #00FF00;*/\n    position: absolute;\n    /*z-index: 2001;*/\n  }\n  #floor{\n    /*border: 1px solid #ff0000;*/\n    width: 35px;\n    height: 35px;\n    display: block;\n\n  }\n  .up{\n    width: 35px;\n    height: 35px;\n    line-height: 35px;\n    text-align: center;\n    /*border:1px solid red;*/\n    position: absolute;\n    right: 20px;\n    bottom:205px;\n    z-index: 2010;\n  }\n  .down{\n    width: 35px;\n    height: 35px;\n    line-height: 35px;\n    text-align: center;\n    /*border:1px solid red;*/\n    position: absolute;\n    right: 20px;\n    bottom:135px;\n    z-index: 2010;\n  }\n/*video*/\n  .videoIcon{\n    position: absolute;\n    top: 20px;\n    width: 20px;\n    right: 20px;\n    /*border: 1px solid #ff0000;*/\n    z-index: 2010;\n  }\n  .video-js{\n    width: 100%;\n    height: 100%;\n    border-radius: 4px;\n    object-fit: cover;\n    /*border:1px solid #0000ff;*/\n    position: relative;\n    /*z-index: 2009;*/\n    background: white;\n\n  }\n  .grid-content {\n    /*border-radius: 4px;\n    min-height: 36px;\n    height: 40vh;\n    line-height: 40vh;\n    text-align: center;\n    !*border:1px solid #ff0000;*!\n    !*overflow: hidden;*!\n    text-align: left;\n    background: white;*/\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/home/videoDemand.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"par-state main-padding\"},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{staticClass:\"col-one\",attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":24,\"xl\":24}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"format\":\"yyyy年MM月dd日\",\"value-format\":\"yyyyMMdd\",\"picker-options\":_vm.choseDateOptions,\"placeholder\":\"选择日期\"},on:{\"change\":_vm.changePicker},model:{value:(_vm.choseDateValue),callback:function ($$v) {_vm.choseDateValue=$$v},expression:\"choseDateValue\"}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.getVideoList}},[_vm._v(\"视频列表\")])],1)]),_vm._v(\" \"),_c('el-col',{staticClass:\"col-two\",attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":24,\"xl\":24}},[_c('div',{staticClass:\"grid-content bg-purple\",attrs:{\"id\":\"vOne\"},on:{\"click\":function($event){$event.preventDefault();_vm.dialog('vOne',$event)}}},[_c('video-player',{ref:\"videoPlayer\",staticClass:\"vjs-custom-skin\",attrs:{\"options\":_vm.playerDemandOptions},on:{\"err\":function($event){_vm.playErr($event)}}}),_vm._v(\" \"),_c('img',{staticClass:\"videoIcon\",attrs:{\"src\":require(\"../../../static/img/rightVideo.png\"),\"alt\":\"\"},on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }_vm.imgDemandMap()}}})],1)]),_vm._v(\" \"),_c('el-col',{staticClass:\"col-three\",attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":24,\"xl\":24}},[_c('el-table',{staticStyle:{\"width\":\"100%\",\"overflow-y\":\"auto\"},attrs:{\"data\":_vm.videoList,\"height\":\"300\"}},[_c('el-table-column',{staticStyle:{\"width\":\"25%\"},attrs:{\"label\":\"视频顺序\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.index+1))])]}}])}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"35%\"},attrs:{\"label\":\"视频开始时间/结束时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"\\n                \"+_vm._s(scope.row.showStart)+\"~\"+_vm._s(scope.row.showEnd)+\"\\n              \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"20%\"},attrs:{\"label\":\"视频时长\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"name-wrapper\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"\\n                \"+_vm._s(scope.row.videoTime)+\"\\n              \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{staticStyle:{\"width\":\"20%\",\"text-align\":\"center\"},attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handlePlay(scope.$index, scope.row)}}},[_vm._v(\"播放\")])]}}])})],1)],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mapVisible),expression:\"mapVisible\"}],staticClass:\"demandDialog\"},[_c('div',{staticClass:\"demandDialogInfo\",attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12,\"offset\":6}},[_c('ul',[_c('li',[_c('ul',[_c('li',[_vm._v(\" 请选择视频点播的设备\")]),_vm._v(\" \"),_c('li',[_c('i',{staticClass:\"el-icon-error\",on:{\"click\":function($event){$event.stopPropagation();_vm.dialogDemandHide()}}})])])]),_vm._v(\" \"),_c('li',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mapShow),expression:\"mapShow\"}],ref:\"myMap\",attrs:{\"id\":\"demandMap\"}}),_vm._v(\" \"),_c('img',{staticClass:\"up\",attrs:{\"src\":require(\"../../../static/img/up.png\"),\"alt\":\"up\"},on:{\"click\":function($event){_vm.upFloor()}}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"floor\"}},[_c('ul',{ref:\"floorUl\",attrs:{\"id\":\"floorUl\"}})]),_vm._v(\" \"),_c('img',{staticClass:\"down\",attrs:{\"src\":require(\"../../../static/img/down.png\"),\"alt\":\"down\"},on:{\"click\":function($event){_vm.downFloor()}}})])])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-4fc28ea5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/view/home/videoDemand.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4fc28ea5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./videoDemand.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./videoDemand.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./videoDemand.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4fc28ea5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./videoDemand.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4fc28ea5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/home/videoDemand.vue\n// module id = null\n// module chunks = ","/*\n* tunnel(隧道的方法:)\n* */\n//添加连接方法\n/*\n* sPeerID:对端ID\n*      (1，项目ID(首字符小写)+分区id(3位，不足3位就补0)+设备ID(5位，不足5位前面补0);\n* sType：2,连接类型(固定0);\n* 3:'0'(固定为0)\n* sListenAddr:4, 侦听地址127.0.0.1:8421(固定);\n* sClientAddr :5,连接地址:127.0.0.1:9000(端口可以固定(分配3个)用来拿数据)\n* */\n\nvar g_back;\n\nconst tunnel={\n    pgConnectAdd (sPeerID, sType, sEncrypt, sListenAddr, sClientAddr,back) {\n      pgTunnelRequest(\"127.0.0.1:17881\", \"GET\", (\"cnntadd?peerid=\" + sPeerID + \"&type=\" + sType + \"&encrypt=\" + sEncrypt + \"&listenaddr=\" + sListenAddr + \"&clientaddr=\" + sClientAddr), \"\", tunnel.pgTunnelCallback);\n      g_back = back;\n\n      //return g_back;\n    },\n    pgConnectDelete (sPeerID, sType, sEncrypt, sListenAddr, sClientAddr, back) {\n        pgTunnelRequest(\"127.0.0.1:17881\", \"GET\", (\"cnntdelete?peerid=\" + sPeerID + \"&type=\" + sType + \"&encrypt=\" + sEncrypt + \"&listenaddr=\" + sListenAddr + \"&clientaddr=\" + sClientAddr), \"\", tunnel.pgTunnelCallback);\n        g_back = back;\n    },\n    pgConnectQuery(sClientAddr, back) {\n      //  查询这个端口之前创建的隧道\n        //pgTunnelRequest(\"127.0.0.1:17881\", \"GET\", (\"cnntquery?peerid=\" + sPeerID + \"&type=\" + sType + \"&encrypt=\" + sEncrypt + \"&listenaddr=\" + sListenAddr + \"&clientaddr=\" + sClientAddr), \"\", tunnel.pgTunnelCallback);\n        pgTunnelRequest(\"127.0.0.1:17881\", \"GET\", (\"cnntlclquery?clientaddr=\" + sClientAddr), \"\", tunnel.pgTunnelCallback);\n        g_back = back;\n    },\n    pgTunnelCallback(uStatus, sResp) {\n\n      if(typeof(g_back) === 'function') {\n        let rt;\n            rt=sResp.substring(8);\n            //console.log(rt);\n        g_back(uStatus, rt);\n        //console.log(g_back(uStatus, sResp));\n      } else {\n        console.log('not func');\n      }\n\n\n      //建立连接之后的回调\n      // back=uStatus + \" : \" + sResp;\n      //return result;\n\n        if (uStatus != 200) {\n            return;\n        }\n\n        var iInd = sResp.indexOf(':');\n        if (iInd <= 0) {\n            return;\n        }\n\n        var sMeth = sResp.substring(0, iInd);\n        var oResp = eval(\"(\" + sResp.substring(iInd + 1) + \")\");\n        if (sMeth == \"domainget\") {\n            if (typeof(oResp.domain) != \"undefined\") {\n                //\tid_domain.value = oResp.domain;\n            }\n        }\n        else if (sMeth == \"domainset\") {\n            if (typeof(oResp.result) != \"undefined\") {\n                if (oResp.result != \"0\") {\n                    if (oResp.result == \"2\") {\n                        alert(\"输入的识别码错误\");\n                    }\n                    else if (oResp.result == \"18\") {\n                        alert(\"输入的识别码不存在\");\n                    }\n                    else if (oResp.result == \"19\") {\n                        alert(\"该识别码所在域的客户端数量已经达到上限，请升级域的级别！\");\n                    }\n                    else if (oResp.result == \"10\") {\n                        alert(\"尚未登录\");\n                    }\n                    else {\n                        alert(\"设置识别码失败，错误码=\" + oResp.result);\n                    }\n                }\n                else {\n                    pgCommentSet(id_comment.value);\n                    alert(\"设置识别码成功\");\n                }\n            }\n        }\n        else if (sMeth == \"commentget\") {\n            if (typeof(oResp.comment) != \"undefined\") {\n                id_comment.value = oResp.comment;\n            }\n        }\n        else if (sMeth == \"commentset\") {\n            if (typeof(oResp.result) != \"undefined\") {\n                if (oResp.result != \"0\") {\n                    pgCommentGet();\n                    if (oResp.result == \"2\") {\n                        alert(\"参数无效\");\n                    }\n                    else {\n                        alert(\"修改说明失败，错误码=\" + oResp.result);\n                    }\n                }\n                else {\n                    // Success.\n                }\n            }\n        }\n        else if (sMeth == \"remoteinvite\") {\n            if (typeof(oResp.result) != \"undefined\") {\n                if (oResp.result == \"0\") {\n                    alert(\"发送请求成功\");\n                }\n                else if (oResp.result == \"17\") {\n                    alert(\"当前已经在远程协助状态\");\n                }\n                else if (oResp.result == \"2\") {\n                    alert(\"参数错误\");\n                }\n                else if (oResp.result == \"10\") {\n                    alert(\"尚未登录\");\n                }\n                else if (oResp.result == \"18\") {\n                    alert(\"没有指定客服人员\");\n                }\n                else if (oResp.result == \"6\") {\n                    alert(\"客服人员不在线\");\n                }\n                else {\n                    alert(\"发送请求失败，错误码=\" + oResp.result);\n                }\n            }\n        }\n        else if (sMeth == \"capturectrl\") {\n            if (typeof(oResp.result) != \"undefined\") {\n                if (oResp.result != \"0\") {\n                    alert(\"触发抓屏失败，错误码=\" + oResp.result);\n                }\n                else {\n                    alert(\"触发抓屏成功\");\n                }\n            }\n        }\n        else if (sMeth == \"tunnelset\") {\n            if (typeof(oResp.result) != \"undefined\") {\n                if (oResp.result != \"0\") {\n                    if (oResp.result == \"2\") {\n                        alert(\"输入的识别码错误\");\n                    }\n                    else if (oResp.result == \"18\") {\n                        alert(\"输入的识别码不存在\");\n                    }\n                    else if (oResp.result == \"19\") {\n                        alert(\"该识别码所在域的客户端数量已经达到上限，请升级域的级别！\");\n                    }\n                    else if (oResp.result == \"10\") {\n                        alert(\"尚未登录\");\n                    }\n                    else {\n                        alert(\"设置失败，错误码=\" + oResp.result);\n                    }\n                }\n                else {\n                    alert(\"设置成功\");\n                }\n            }\n        }\n    }\n}\n\nexport default tunnel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/ol/shuidao.js\n// module id = uVkj\n// module chunks = 4 5"],"sourceRoot":""}